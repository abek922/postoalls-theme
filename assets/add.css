/* 透明ヘッダー時のロゴを非表示にする */
:has(.shopify-section:first-child [allow-transparent-header]):not(:has(.shopify-section--header ~ .shopify-section-group-header-group)) .header:not(.is-solid, :has(.header__primary-nav [open], .header__secondary-nav [open], .header-search[open])) .header__logo {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0s ease, visibility 0s ease;
}

/* 通常ヘッダー時のロゴを表示 */
:has(.shopify-section:first-child [allow-transparent-header]):not(:has(.shopify-section--header ~ .shopify-section-group-header-group)) .header.is-solid .header__logo,
:has(.shopify-section:first-child [allow-transparent-header]):not(:has(.shopify-section--header ~ .shopify-section-group-header-group)) .header:has(.header__primary-nav [open], .header__secondary-nav [open], .header-search[open]) .header__logo {
  opacity: 1;
  visibility: visible;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

/* スクロール位置の調整 - より下まで透明ヘッダーを維持 */
#header-scroll-tracker {
  top: var(--header-scroll-tracker-offset, 800px) !important; /* デフォルトの10pxから300pxに変更 */
}

/* === モバイル初回読み込み時のバグ修正（追加分のみ） === */
@media screen and (max-width: 768px) {
  /* モバイルでの初期読み込み時に透明ヘッダー状態を強制 */
  :has(.shopify-section:first-child [allow-transparent-header]) .header:not(.is-solid) {
    background-color: transparent !important;
    box-shadow: none !important;
  }
  
  /* モバイルでの初期読み込み時にロゴを非表示に強制 */
  :has(.shopify-section:first-child [allow-transparent-header]) .header:not(.is-solid) .header__logo {
    opacity: 0 !important;
    visibility: hidden !important;
  }
}